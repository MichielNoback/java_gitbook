
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Thymeleaf flow control & fragments Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-page-toc/page-toc.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="sessions.html" />
    
    
    <link rel="prev" href="thymeleaf_expressions.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Java
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../shortcuts.html">
            
                <a href="../shortcuts.html">
            
                    
                    IntelliJ keyboard shortcuts
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Part 1: Getting started</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../01_getting_started/intellij.html">
            
                <a href="../01_getting_started/intellij.html">
            
                    
                    A first IntelliJ project
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../01_getting_started/essentials.html">
            
                <a href="../01_getting_started/essentials.html">
            
                    
                    The essentials
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../01_getting_started/first_look_at_objects.html">
            
                <a href="../01_getting_started/first_look_at_objects.html">
            
                    
                    A first look at objects
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../02_syntax/basic_program_design.html">
            
                <a href="../02_syntax/basic_program_design.html">
            
                    
                    Basic program design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../02_syntax/naming_commenting.html">
            
                <a href="../02_syntax/naming_commenting.html">
            
                    
                    Naming and commenting
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Part 2: Syntax</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../02_syntax/data_types.html">
            
                <a href="../02_syntax/data_types.html">
            
                    
                    Data types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../02_syntax/arrays.html">
            
                <a href="../02_syntax/arrays.html">
            
                    
                    Arrays
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../02_syntax/operators.html">
            
                <a href="../02_syntax/operators.html">
            
                    
                    Operators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../02_syntax/flow_control.html">
            
                <a href="../02_syntax/flow_control.html">
            
                    
                    Flow control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="../02_syntax/methods.html">
            
                <a href="../02_syntax/methods.html">
            
                    
                    Methods
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="../02_syntax/packages_imports.html">
            
                <a href="../02_syntax/packages_imports.html">
            
                    
                    Packages & Imports
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="../02_syntax/demo_case_naming.html">
            
                <a href="../02_syntax/demo_case_naming.html">
            
                    
                    Demo case: The power of good names
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Part 3: Core APIs</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../03_apis/interfaces.html">
            
                <a href="../03_apis/interfaces.html">
            
                    
                    Interfaces
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../03_apis/collections.html">
            
                <a href="../03_apis/collections.html">
            
                    
                    Collections
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../03_apis/class_object_methods.html">
            
                <a href="../03_apis/class_object_methods.html">
            
                    
                    Methods of class Object
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="../03_apis/sorting.html">
            
                <a href="../03_apis/sorting.html">
            
                    
                    Sorting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="../03_apis/exceptions.html">
            
                <a href="../03_apis/exceptions.html">
            
                    
                    Exceptions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="../03_apis/io.html">
            
                <a href="../03_apis/io.html">
            
                    
                    File IO
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="../03_apis/regex.html">
            
                <a href="../03_apis/regex.html">
            
                    
                    Regular Expressions
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Part 4: Object-oriented programming</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../04_oop/class_design.html">
            
                <a href="../04_oop/class_design.html">
            
                    
                    Encapsulation through access modifiers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="../04_oop/access_modifiers.html">
            
                <a href="../04_oop/access_modifiers.html">
            
                    
                    Access modifiers & other keywords
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="../04_oop/inheritance.html">
            
                <a href="../04_oop/inheritance.html">
            
                    
                    Inheritance and UML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="../04_oop/enums.html">
            
                <a href="../04_oop/enums.html">
            
                    
                    Enums
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="../04_oop/encapsulation.html">
            
                <a href="../04_oop/encapsulation.html">
            
                    
                    Encapsulation revisited
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="../04_oop/inner_classes.html">
            
                <a href="../04_oop/inner_classes.html">
            
                    
                    Inner classes
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Summaries Part 1-4</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../design_rules.html">
            
                <a href="../design_rules.html">
            
                    
                    Design Rules summary
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Part 5: Web-based Java & Thymeleaf</li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="refresher.html">
            
                <a href="refresher.html">
            
                    
                    Refresher
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="toolbox.html">
            
                <a href="toolbox.html">
            
                    
                    Toolbox
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="first_project.html">
            
                <a href="first_project.html">
            
                    
                    A first project
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.4" data-path="mvc.html">
            
                <a href="mvc.html">
            
                    
                    Implementing MVC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.5" data-path="thymeleaf_expressions.html">
            
                <a href="thymeleaf_expressions.html">
            
                    
                    Thymeleaf expression types & objects
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="7.6" data-path="thymeleaf_flow_control.html">
            
                <a href="thymeleaf_flow_control.html">
            
                    
                    Thymeleaf flow control & fragments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.7" data-path="sessions.html">
            
                <a href="sessions.html">
            
                    
                    Sessions & Scopes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.8" data-path="servlet_details.html">
            
                <a href="servlet_details.html">
            
                    
                    Servlet details & Lifecycle hooks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.9" data-path="databases.html">
            
                <a href="databases.html">
            
                    
                    Database interaction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.10" data-path="ajax.html">
            
                <a href="ajax.html">
            
                    
                    Ajax communication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.11" data-path="filters_upload.html">
            
                <a href="filters_upload.html">
            
                    
                    Web filters and file uploads
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.12" data-path="webbased_exercises1.html">
            
                <a href="webbased_exercises1.html">
            
                    
                    Exercises Web-based Information Systems 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.13" data-path="html_cheatsheet.html">
            
                <a href="html_cheatsheet.html">
            
                    
                    html cheat sheet
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Part 6: Developer tools</li>
        
        
    
        <li class="chapter " data-level="8.1" data-path="../06_tools/JUnit_basics.html">
            
                <a href="../06_tools/JUnit_basics.html">
            
                    
                    JUnit 5 Basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="../06_tools/JUnit_advanced.html">
            
                <a href="../06_tools/JUnit_advanced.html">
            
                    
                    JUnit 5 Advanced
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Part 7: Design</li>
        
        
    
        <li class="chapter " data-level="9.1" data-path="../07_design/demo_case_refactoring.html">
            
                <a href="../07_design/demo_case_refactoring.html">
            
                    
                    Demo case refactoring
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Thymeleaf flow control & fragments</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="thymeleaf-flow-control-and-fragments">Thymeleaf flow control and fragments</h1>
<h2 id="introduction">Introduction</h2>
<p>This post is the second on Thymeleaf. It deals with these templating techniques that Thymeleaf offers:</p>
<ul>
<li>conditionals </li>
<li>loops</li>
<li>using fragments as building blocks</li>
</ul>
<p>For a complete overview you should refer to <a href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html" title="Thymeleaf documentation" target="_blank">the official docs</a>.</p>
<p>These examples all make use of the <code>Movie</code> class:</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Movie</span> </span>{
    <span class="hljs-keyword">private</span> String title;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> year;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> rating = -<span class="hljs-number">1</span>;
    <span class="hljs-keyword">private</span> Set&lt;String&gt; mainActors = <span class="hljs-keyword">new</span> HashSet&lt;&gt;();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;Movie&gt; movies;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Movie</span><span class="hljs-params">()</span> </span>{
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Movie</span><span class="hljs-params">(String title, <span class="hljs-keyword">int</span> year)</span> </span>{
        <span class="hljs-keyword">this</span>.title = title;
        <span class="hljs-keyword">this</span>.year = year;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Movie</span><span class="hljs-params">(String title, <span class="hljs-keyword">int</span> year, <span class="hljs-keyword">double</span> rating)</span> </span>{
        <span class="hljs-keyword">this</span>.title = title;
        <span class="hljs-keyword">this</span>.year = year;
        <span class="hljs-keyword">this</span>.rating = rating;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Movie</span><span class="hljs-params">(String title, <span class="hljs-keyword">int</span> year, <span class="hljs-keyword">double</span> rating, List&lt;String&gt; mainActors)</span> </span>{
        <span class="hljs-keyword">this</span>.title = title;
        <span class="hljs-keyword">this</span>.year = year;
        <span class="hljs-keyword">this</span>.rating = rating;
        <span class="hljs-keyword">this</span>.mainActors.addAll(mainActors);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getTitle</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> title;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getYear</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> year;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">getRating</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> rating;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title">getMainActors</span><span class="hljs-params">()</span> </span>{
        List&lt;String&gt; actors = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();
        actors.addAll(mainActors);
        actors.sort(String::compareTo);
        <span class="hljs-keyword">return</span> actors;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setRating</span><span class="hljs-params">(<span class="hljs-keyword">double</span> rating)</span> </span>{
        <span class="hljs-keyword">this</span>.rating = rating;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addActor</span><span class="hljs-params">(String actor)</span> </span>{
        mainActors.add(actor);
    }


    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;Movie&gt; <span class="hljs-title">getAllMovies</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> Movie.movies;
    }

    <span class="hljs-comment">//create a list from IMDB top 20</span>
    <span class="hljs-keyword">static</span> {
        List&lt;Movie&gt; movies = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();
        Movie movie;
        movie = <span class="hljs-keyword">new</span> Movie(<span class="hljs-string">&quot;The Shawshank Redemption&quot;</span>, <span class="hljs-number">1994</span>, <span class="hljs-number">9.2</span>, List.of(<span class="hljs-string">&quot;Tim Robbins&quot;</span>, <span class="hljs-string">&quot;Morgan Freeman&quot;</span>));
        movies.add(movie);
        movie = <span class="hljs-keyword">new</span> Movie(<span class="hljs-string">&quot;The Dark Knight&quot;</span>, <span class="hljs-number">2008</span>, <span class="hljs-number">9.0</span>, List.of(<span class="hljs-string">&quot;Christian Bale,&quot;</span>, <span class="hljs-string">&quot;Heath Ledger&quot;</span>));
        movies.add(movie);
        movie = <span class="hljs-keyword">new</span> Movie(<span class="hljs-string">&quot;Pulp Fiction&quot;</span>, <span class="hljs-number">1994</span>, <span class="hljs-number">8.9</span>, List.of(<span class="hljs-string">&quot;John Travolta&quot;</span>, <span class="hljs-string">&quot;Uma Thurman&quot;</span>, <span class="hljs-string">&quot;Samuel L. Jackson&quot;</span>));
        movies.add(movie);
        movie = <span class="hljs-keyword">new</span> Movie(<span class="hljs-string">&quot;Fight Club &quot;</span>, <span class="hljs-number">1999</span>, <span class="hljs-number">8.8</span>, List.of(<span class="hljs-string">&quot;Brad Pitt&quot;</span>, <span class="hljs-string">&quot;Edward Norton&quot;</span>));
        movies.add(movie);
        movie = <span class="hljs-keyword">new</span> Movie(<span class="hljs-string">&quot;Forrest Gump&quot;</span>, <span class="hljs-number">1994</span>, <span class="hljs-number">8.7</span>, List.of(<span class="hljs-string">&quot;Tom Hanks&quot;</span>, <span class="hljs-string">&quot;Robin Wright&quot;</span>, <span class="hljs-string">&quot;Gary Sinise&quot;</span>));
        movies.add(movie);
        movie = <span class="hljs-keyword">new</span> Movie(<span class="hljs-string">&quot;Inception&quot;</span>, <span class="hljs-number">2010</span>, <span class="hljs-number">8.7</span>, List.of(<span class="hljs-string">&quot;Leonardo DiCaprio&quot;</span>, <span class="hljs-string">&quot;Joseph Gordon-Levitt&quot;</span>));
        movies.add(movie);
        movie = <span class="hljs-keyword">new</span> Movie(<span class="hljs-string">&quot;One Flew Over the Cuckoo&apos;s Nest&quot;</span>, <span class="hljs-number">1975</span>, <span class="hljs-number">8.7</span>, List.of(<span class="hljs-string">&quot;Jack Nicholson&quot;</span>, <span class="hljs-string">&quot;Louise Fletcher&quot;</span>, <span class="hljs-string">&quot;Will Sampson&quot;</span>));
        movies.add(movie);
        movie = <span class="hljs-keyword">new</span> Movie(<span class="hljs-string">&quot;The Usual Suspects&quot;</span>, <span class="hljs-number">1995</span>, <span class="hljs-number">8.5</span>, List.of(<span class="hljs-string">&quot;Kevin Spacey&quot;</span>, <span class="hljs-string">&quot;Gabriel Byrne&quot;</span>, <span class="hljs-string">&quot;Chazz Palminteri&quot;</span>));
        movies.add(movie);
        Movie.movies = movies;
    }
}
</code></pre>
<p>The list of movies is attached to the WebContxt object using</p>
<pre><code class="lang-java">ctx.setVariable(<span class="hljs-string">&quot;movies&quot;</span>, Movie.getAllMovies());
</code></pre>
<p>so for all examples the <code>$movies</code> variable is available.</p>
<h3 id="iteration">Iteration</h3>
<p>Iteration with Thymeleaf is as simple as in Java code; simply use <code>th:each</code>.
This is an example with the movies list: </p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Year of release<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>IMDB rating<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;movie:${movies}&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;${movie.title}&quot;</span>&gt;</span>_title_<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;${movie.year}&quot;</span>&gt;</span>_year_<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;${movie.rating}&quot;</span>&gt;</span>_rating_<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>
</code></pre>
<p>Alternatively, you can use the <strong><em>local scope</em></strong> syntax:</p>
<pre><code class="lang-html">    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;movie:${movies}&quot;</span> <span class="hljs-attr">th:object</span>=<span class="hljs-string">&quot;${movie}&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;*{title}&quot;</span>&gt;</span>_title_<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;*{year}&quot;</span>&gt;</span>_year_<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;*{rating}&quot;</span>&gt;</span>_rating_<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
</code></pre>
<p>both of which result in this table:</p>
<table>
    <thead>
    <tr>
        <th>Title</th>
        <th>Year of release</th>
        <th>IMDB rating</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>The Shawshank Redemption</td>
        <td>1994</td>
        <td>9.2</td>
    </tr>
    <tr>
        <td>The Dark Knight</td>
        <td>2008</td>
        <td>9.0</td>
    </tr>
    <tr>
        <td>Pulp Fiction</td>
        <td>1994</td>
        <td>8.9</td>
    </tr>
    <tr>
        <td>Fight Club </td>
        <td>1999</td>
        <td>8.8</td>
    </tr>
    <tr>
        <td>Forrest Gump</td>
        <td>1994</td>
        <td>8.7</td>
    </tr>
    <tr>
        <td>Inception</td>
        <td>2010</td>
        <td>8.7</td>
    </tr>
    <tr>
        <td>One Flew Over the Cuckoo&apos;s Nest</td>
        <td>1975</td>
        <td>8.7</td>
    </tr>
    <tr>
        <td>The Usual Suspects</td>
        <td>1995</td>
        <td>8.5</td>
    </tr>
    </tbody>
</table>

<p>You can also sort stuff in Thymeleaf. Given an extra model parameter passed from the servlet, and the utility object <code>#lists</code>.<br>Of course, sorting is something you usually leave to your Javascript front-end (Datatables.js). But there are uses for it, and this prevents you from attaching the same list twice to the WebContext object.</p>
<pre><code class="lang-java"><span class="hljs-comment">//java 8+ type Comparator</span>
ctx.setVariable(<span class="hljs-string">&quot;movies_year_sorter&quot;</span>, (Comparator&lt;Movie&gt;) (o1, o2) -&gt; Integer.compare(o1.getYear(), o2.getYear()));

<span class="hljs-comment">//or, a pre-java 8 Comparator</span>
ctx.setVariable(<span class="hljs-string">&quot;movies_year_sorter&quot;</span>, <span class="hljs-keyword">new</span> Comparator&lt;Movie&gt;() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">compare</span><span class="hljs-params">(Movie m1, Movie m2)</span> </span>{
        <span class="hljs-keyword">return</span> Integer.compare(m1.getYear(), m2.getYear());
    }
});
</code></pre>
<p>then in Thymeleaf, use the Comparator object:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;movie:${#lists.sort(movies, movies_year_sorter)}&quot;</span>&gt;</span>
</code></pre>
<p>Thymeleaf also provides a mechanism that stores the state of the iteration process. It has several useful properties:</p>
<ul>
<li><code>index</code>: the current iteration index, starting with 0 (zero)  </li>
<li><code>count</code>: the number of elements processed so far  </li>
<li><code>size</code>: the total number of elements in the list  </li>
<li><code>even/odd</code>: boolean - true if the current iteration index is even or odd  </li>
<li><code>first</code>: boolean - true if the current iteration is the first one  </li>
<li><code>last</code>: boolean - true if the current iteration is the last one  </li>
</ul>
<p>The next piece of code demonstrates the use of this iteration statistics object, as well as another technique: the if/else ternary operator for Thymeleaf. This example shows you can even nest these.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Pos<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Year of release<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>IMDB rating<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;movie, it_stat:${movies}&quot;</span> 
        <span class="hljs-attr">th:class</span>=<span class="hljs-string">&quot;${it_stat.first} ? &apos;first&apos; : (${it_stat.even} ? &apos;even&apos; : &apos;odd&apos;)&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;${it_stat.count} + &apos; / &apos; + ${it_stat.size}&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;${movie.title}&quot;</span>&gt;</span>_title_<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;${movie.year}&quot;</span>&gt;</span>_year_<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;${movie.rating}&quot;</span>&gt;</span>_rating_<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>
</code></pre>
<p>when this css is applied:</p>
<pre><code class="lang-css"><span class="hljs-selector-class">.even</span> {
    <span class="hljs-attribute">background-color</span>: aliceblue <span class="hljs-meta">!important</span>;
}
<span class="hljs-selector-class">.odd</span> {
    <span class="hljs-attribute">background-color</span>: lightcyan <span class="hljs-meta">!important</span>;
}
<span class="hljs-selector-class">.first</span> {
    <span class="hljs-attribute">background-color</span>: coral <span class="hljs-meta">!important</span>;
}
</code></pre>
<p>this is the result:</p>
<table>
    <thead>
    <tr>
        <th>Pos</th>
        <th>Title</th>
        <th>Year of release</th>
        <th>IMDB rating</th>
    </tr>
    </thead>
    <tbody>
    <tr class="first">
        <td>1 / 8</td>
        <td>The Shawshank Redemption</td>
        <td>1994</td>
        <td>9.2</td>
    </tr>
    <tr class="even">
        <td>2 / 8</td>
        <td>The Dark Knight</td>
        <td>2008</td>
        <td>9.0</td>
    </tr>
    <tr class="odd">
        <td>3 / 8</td>
        <td>Pulp Fiction</td>
        <td>1994</td>
        <td>8.9</td>
    </tr>
    <tr class="even">
        <td>4 / 8</td>
        <td>Fight Club </td>
        <td>1999</td>
        <td>8.8</td>
    </tr>
    <tr class="odd">
        <td>5 / 8</td>
        <td>Forrest Gump</td>
        <td>1994</td>
        <td>8.7</td>
    </tr>
    <tr class="even">
        <td>6 / 8</td>
        <td>Inception</td>
        <td>2010</td>
        <td>8.7</td>
    </tr>
    <tr class="odd">
        <td>7 / 8</td>
        <td>One Flew Over the Cuckoo&apos;s Nest</td>
        <td>1975</td>
        <td>8.7</td>
    </tr>
    <tr class="even">
        <td>8 / 8</td>
        <td>The Usual Suspects</td>
        <td>1995</td>
        <td>8.5</td>
    </tr>
    </tbody>
</table>

<p>There is a lot going on in this statement:<br><code>&lt;tr th:each=&quot;movie, it_stat:${movies}&quot;</code><br><code>th:class=&quot;${it_stat.first} ? &apos;first&apos; : (${it_stat.even} ? &apos;even&apos; : &apos;odd&apos;)&quot;&gt;</code>.
Let&apos;s dissect.  </p>
<p>First there is the iteration initialization where an <code>it_stat</code> object is requested as well: <code>th:each=&quot;movie, it_stat:${movies}&quot;</code>. In the second part, a nested ternary statement sets the <code>class</code> attribute of the current row. The first level determines the first row: <code>th:class=&quot;${it_stat.first} ? &apos;first&apos; : (&lt;nested ternary&gt;)&quot;</code>. The nested ternary determines the class of all rows except the first: <code>${it_stat.even} ? &apos;even&apos; : &apos;odd&apos;</code>.</p>
<h3 id="conditionals-if-and-thblock">Conditionals: if (and th:block)</h3>
<p>Besides the ternary operator structure shown in the previous section, regular &quot;if&quot; tests can be applied. Here is a test for the rating of the movie; only movies with a rating higher than 9 are displayed:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;movie:${movies}&quot;</span> 
        <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;${movie.title} + &apos; (&apos; + ${movie.year} + &apos;) - &apos; + ${movie.rating}&quot;</span> 
        <span class="hljs-attr">th:if</span>=<span class="hljs-string">&quot;${movie.rating &gt;= 9}&quot;</span>&gt;</span>_movie_<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
</code></pre>
<p>The specified expression evaluates to a boolean following these rules:</p>
<p><strong><em>test evaluates to <code>true</code> if value is not <code>null</code> and value is</em></strong></p>
<ul>
<li>a boolean and is true</li>
<li>a number and is non-zero</li>
<li>a character and is non-zero</li>
<li>a String and is not &#x201C;false&#x201D;, &#x201C;off&#x201D; or &#x201C;no&#x201D;</li>
<li>not a boolean, a number, a character or a String</li>
</ul>
<p>The Thymeleaf <code>th:if</code> attribute has an inverse attribute, <code>th:unless</code>.
This makes an if/else-like structure possible. Here, you see it in combination with <code>th:block</code> which is a handy Thymeleaf element which does not generate a html DOM element. Using th:block prevents excessive use of nested div and span elements.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">th:block</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;movie : ${movies}&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">th:if</span>=<span class="hljs-string">&quot;${movie.rating &gt;= 9}&quot;</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;${movie.title} + &apos; - &apos; + ${movie.rating} + &apos; - WOW!&apos;&quot;</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">th:unless</span>=<span class="hljs-string">&quot;${movie.rating &gt;= 9}&quot;</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;${movie.title} + &apos; - &apos; + ${movie.rating} + &apos; - JUST OK&apos;&quot;</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">th:block</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
</code></pre>
<h3 id="conditionals-switch">Conditionals: switch</h3>
<p>Here you see a combination of iteration and switch/case to build an ordered list. </p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;user:${users}&quot;</span> <span class="hljs-attr">th:switch</span>=<span class="hljs-string">&quot;${user.role.toString()}&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:case</span>=<span class="hljs-string">&quot;${&apos;ADMIN&apos;}&quot;</span> 
            <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;${user.name} + &apos; (&apos; + ${user.role} + &apos;) manages all accounts&apos;&quot;</span>&gt;</span>_admin_<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:case</span>=<span class="hljs-string">&quot;${&apos;USER&apos;}&quot;</span> 
            <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;${user.name} + &apos; (&apos; + ${user.role} + &apos;) can browse and share all site content&apos;&quot;</span>&gt;</span>_user_<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:case</span>=<span class="hljs-string">&quot;${&apos;GUEST&apos;}&quot;</span> 
            <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;${user.name} + &apos; (&apos; + ${user.role} + &apos;) can only see our front page&apos;&quot;</span>&gt;</span>_guest_<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:case</span>=<span class="hljs-string">&quot;*&quot;</span> 
            <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;${user.name} + &apos;(&apos; + ${user.role} + &apos;) we do not know this role&apos;&quot;</span>&gt;</span>_unknown_<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span>
</code></pre>
<p>The <code>th:switch</code> expression selects the User role (an enum) in each loop iteration, takes its String representation and compares this to a string literal in each <code>th:case</code>. Only the <code>th:case</code> that matches will be evaluated. When no match is found, the <em>default</em> is evaluated, specified with <code>th:case=&quot;*&quot;</code>. The result when applied to this list of User instances:</p>
<pre><code class="lang-java">List&lt;User&gt; users = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();
User u;
u = <span class="hljs-keyword">new</span> User(<span class="hljs-string">&quot;Hank&quot;</span>, <span class="hljs-string">&quot;henk@example.com&quot;</span>, Role.ADMIN);
users.add(u);
u = <span class="hljs-keyword">new</span> User(<span class="hljs-string">&quot;Roger&quot;</span>, <span class="hljs-string">&quot;roger@example.com&quot;</span>, Role.USER);
users.add(u);
u = <span class="hljs-keyword">new</span> User(<span class="hljs-string">&quot;Diana&quot;</span>, <span class="hljs-string">&quot;diana@example.com&quot;</span>, Role.GUEST);
users.add(u);
</code></pre>
<p>is this:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Hank (ADMIN) manages all accounts<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Roger (USER) can browse and share all site content<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Diana (GUEST) can only see our front page<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span>
</code></pre>
<p>Note that with just one <code>th:case</code>, you can put everything within a single <code>li</code> tag - no need for the <code>span</code>.</p>
<h2 id="working-with-fragments">Working with fragments</h2>
<p>Parts of your pages will be reused over multiple other pages. Specifically, this is the case for banners, footers, menus and headers. Instead of copy-and-paste, Thymeleaf offers a nice mechanism for reusing page fragments - even conditionally! The strategy of choice here is to create a single Thymeleaf html page called &quot;template&quot; or &quot;fragments&quot; and to include elements of this page in others.
Consider this html file called <code>template.html</code>:</p>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html SYSTEM &quot;http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd&quot;&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.w3.org/1999/xhtml&quot;</span>
      <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span> <span class="hljs-attr">th:fragment</span>=<span class="hljs-string">&quot;headerFragment&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Type&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>_TITLE_<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@{/css/main.css}&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;../../css/main.css&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:fragment</span>=<span class="hljs-string">&quot;banner&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;logo&quot;</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">&quot;@{/graphics/Awesome.png}&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../../graphics/Awesome.png&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;banner pic&quot;</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;banner_title&quot;</span>&gt;</span>Welcome, ye of lesser quality<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!--these can be conditionally selected--&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:fragment</span>=<span class="hljs-string">&quot;menu&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;admin&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>my secret content<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:fragment</span>=<span class="hljs-string">&quot;menu&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;normaluser&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>my regular content<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Template layout<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
            &quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et
            dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip
            ex ea commodo consequat.&quot;
        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- receives an argument called pub --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:fragment</span>=<span class="hljs-string">&quot;footer(pub)&quot;</span>&gt;</span>
        &amp;copy; 2018 Team Awesome. Please don&apos;t contact us; we are too busy!<span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>
        But if you really need to communicate, you can find us at the local pub:
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;${pub}&quot;</span>&gt;</span>_PUB_<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>The different parts (divs) have been marked with <code>th:fragment=&quot;&lt;fragment_name&gt;&quot;</code>. These <code>th:fragment</code> tags make them available for inclusion in other pages.</p>
<p>This is how you include a fragment from this page into another:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:insert</span>=<span class="hljs-string">&quot;~{template :: banner}&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-comment">&lt;!-- shorthand --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:insert</span>=<span class="hljs-string">&quot;template :: banner&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>The <code>th:insert</code> expression expects a fragment expression (<code>~{...}</code>), which is an expression that results in a fragment. The first part of this expression is the name of the html file (<code>template.html</code>) without the extension and the second part is the fragment to be included. With a non-complex fragment expression, the (<code>~{</code>,<code>}</code>) enclosing is optional, so the shorthand notation suffices.</p>
<p>Here is another example, the footer. This fragment takes an argument called <code>pub</code> that is available as variable by that same name. This is how to pass a variable   </p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:insert</span>=<span class="hljs-string">&quot;~{template :: footer(&apos;The Bear Inn&apos;)}&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>and using it with the fragment is standard variable expression syntax: <code>${pub}</code>.</p>
<p>Finally, different variants of a fragment can be conditionally included - here demonstrated with a ternary statement:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:insert</span>=<span class="hljs-string">&quot;~{template :: (${users[0].getRole().toString() == &apos;ADMIN&apos;} ? &apos;menu.admin&apos; : &apos;menu.normaluser&apos;)}&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>If the Role is ADMIN, <code>&lt;div th:fragment=&quot;menu&quot; class=&quot;admin&quot;&gt;...</code> is selected, otherwise <code>&lt;div th:fragment=&quot;menu&quot; class=&quot;normaluser&quot;&gt;...</code>.</p>
<h4 id="the-difference-between-thinsert-and-threplace">The difference between <code>th:insert</code> and <code>th:replace</code></h4>
<p>th:insert is the simplest: it will simply insert the specified fragment as the body of its host tag.</p>
<p>The <code>th:replace</code> expression actually replaces its host tag with the specified fragment.</p>
<p>So, this:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:insert</span>=<span class="hljs-string">&quot;~{template :: (${users[0].getRole().toString() == &apos;ADMIN&apos;} ? &apos;menu.admin&apos; : &apos;menu.normaluser&apos;)}&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>results in </p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;admin&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>my secret content<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>whereas </p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:replace</span>=<span class="hljs-string">&quot;~{template :: (${users[0].getRole().toString() == &apos;ADMIN&apos;} ? &apos;menu.admin&apos; : &apos;menu.normaluser&apos;)}&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>results in </p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;admin&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>my secret content<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="thymeleaf_expressions.html" class="navigation navigation-prev " aria-label="Previous page: Thymeleaf expression types & objects">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="sessions.html" class="navigation navigation-next " aria-label="Next page: Sessions & Scopes">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Thymeleaf flow control & fragments","level":"7.6","depth":1,"next":{"title":"Sessions & Scopes","level":"7.7","depth":1,"path":"05_web/sessions.md","ref":"05_web/sessions.md","articles":[]},"previous":{"title":"Thymeleaf expression types & objects","level":"7.5","depth":1,"path":"05_web/thymeleaf_expressions.md","ref":"05_web/thymeleaf_expressions.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["page-toc"],"pluginsConfig":{"page-toc":{"position":"before-first","selector":".markdown-section h1, .markdown-section h2, .markdown-section h3","showByDefault":true},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"05_web/thymeleaf_flow_control.md","mtime":"2020-06-15T13:09:28.789Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-07-09T10:28:48.726Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-page-toc/anchor-3.1.1.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-page-toc/page-toc.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

